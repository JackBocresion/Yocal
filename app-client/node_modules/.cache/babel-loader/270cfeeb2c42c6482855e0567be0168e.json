{"ast":null,"code":"var _jsxFileName = \"/Users/jackbocresion/Desktop/Final App sql/client/app-client/src/App.js\";\nimport Navbar from './components/Nav';\nimport React, { useEffect, useState, createContext } from 'react';\nimport './styles/calendar.scss';\nimport './styles/App.css';\nimport Login from './components/Login';\nimport Home from './components/Home'; //import Home from './components/newhome';\n\nimport { BrowserRouter as Router, Route, Switch, Redirect, useLocation, useHistory } from 'react-router-dom';\nimport Createevent from './components/CreateEvent';\nimport './styles/Event.scss';\nimport axios from 'axios';\nimport Friends from './components/Friends';\nimport BetaFooter from './components/BetaFooter';\nimport Edit from './components/Edit';\nimport './styles/toruskit.css';\nimport Chat from './components/Chat/chatHome';\nimport { useCycle } from 'framer-motion'; //import { PulseLoader } from 'halogen';\n\nimport Spinner from './microComponents/spinner';\nimport Archive from \"./components/Archive\"; // import Conflicts from \"./components/Conflicts\"\n//use via props vs via a freq called func becasue it will give better performance!\n\nexport const userData = createContext();\n\nconst App = () => {\n  //create a function here that will create the props data. if it cannot find the data for the prop, redirect and/or return null.\n  const [state, setState] = useState({\n    username: null,\n    data: null,\n    events: null,\n    friendEvents: null,\n\n    /*--------------------*/\n    friendReqs: null,\n    friends: null,\n\n    /*--------------------*/\n    month: null,\n    year: null,\n\n    /* ------------------ */\n    chats: null,\n    messages: null\n  }); //get to removeing the constructors!!!\n\n  useEffect(() => {\n    getData();\n    setInterval(() => {\n      console.log('refreshing...');\n      getData();\n    }, 15000); //localize???\n  }, []); //put events into state\n  //console.log(state, 'state from appjs');\n\n  return /*#__PURE__*/React.createElement(userData.Provider, {\n    value: state,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, state.username == null && window.location.pathname != '/' ? /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/\",\n    exact: true,\n    component: Login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/home\",\n    exact: true,\n    component: Home,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/home/:day/:month/:year\",\n    component: Createevent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/friends\",\n    component: Friends,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/chat\",\n    component: Chat,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/edit/:id\",\n    component: Edit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/archive\",\n    component: Archive,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 22\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    render: () => /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 40\n      }\n    }, \"404 error\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }))));\n\n  function getData() {\n    const cookie = localStorage.getItem('token');\n\n    if (cookie) {\n      if (window.location.pathname === '/') {\n        window.location.pathname = '/home';\n      }\n\n      axios.get('http://localhost:8000/getuser', {\n        headers: {\n          Authorization: `Bearer ${cookie}`\n        }\n      }).then(res => {\n        console.log(res.data, 'res'); // setTimeout(()=>\n\n        setState({\n          username: res.data.user.username,\n          data: res.data.user,\n          events: res.data.events.sort((a, b) => sortByDate(a, b)).sort(sortNew),\n          //.filter(d => new Date() < new Date(d.date)),\n          id: res.data.user.id,\n\n          /*--------------------*/\n          incoming: res.data.incoming,\n          outgoing: res.data.outgoing,\n          friends: res.data.friends,\n\n          /*--------------------*/\n          refresh: () => getData(),\n\n          /*--------------------*/\n          conflicts: res.data.conflicts\n        }); //,\n        //       3000\n        //   );\n      }).catch(err => {\n        //if the cookie is bad, then login\n        console.log('in catch block, fatal req error', err);\n        localStorage.removeItem('token');\n        window.location.pathname = '/';\n      }); //this should ONLY be triggered when the cookie is null and the pathname is not login, so a user is not found.\n    } else if (window.location.pathname != '/') {\n      //if there is no cookie, the redirect will go through, but the component will handle the rejection.\n      //console.log('error!');\n      // <Redirect to=\"/\"/>\n      window.location.pathname = '/';\n    }\n  }\n};\n\nexport default App;\n\nfunction sortByDate(a, b) {\n  if (new Date(a.date) > new Date(b.date)) {\n    return -1;\n  } else {\n    return 1;\n  }\n}\n\nfunction sortNew(a, b) {\n  if (new Date(a.date).getDate() == new Date(b.date).getDate() && new Date(a.date).getMonth() == new Date(b.date).getMonth() && new Date(a.date).getFullYear() == new Date(b.date).getFullYear()) {\n    return 1;\n  } else {\n    return -1;\n  }\n}","map":{"version":3,"sources":["/Users/jackbocresion/Desktop/Final App sql/client/app-client/src/App.js"],"names":["Navbar","React","useEffect","useState","createContext","Login","Home","BrowserRouter","Router","Route","Switch","Redirect","useLocation","useHistory","Createevent","axios","Friends","BetaFooter","Edit","Chat","useCycle","Spinner","Archive","userData","App","state","setState","username","data","events","friendEvents","friendReqs","friends","month","year","chats","messages","getData","setInterval","console","log","window","location","pathname","cookie","localStorage","getItem","get","headers","Authorization","then","res","user","sort","a","b","sortByDate","sortNew","id","incoming","outgoing","refresh","conflicts","catch","err","removeItem","Date","date","getDate","getMonth","getFullYear"],"mappings":"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","sourcesContent":["import Navbar from './components/Nav';\nimport React, { useEffect, useState, createContext } from 'react';\nimport './styles/calendar.scss';\nimport './styles/App.css';\nimport Login from './components/Login';\nimport Home from './components/Home';\n//import Home from './components/newhome';\nimport {\n   BrowserRouter as Router,\n   Route,\n   Switch,\n   Redirect,\n   useLocation,\n   useHistory\n} from 'react-router-dom';\nimport Createevent from './components/CreateEvent';\nimport './styles/Event.scss';\nimport axios from 'axios';\nimport Friends from './components/Friends';\nimport BetaFooter from './components/BetaFooter';\nimport Edit from './components/Edit';\nimport './styles/toruskit.css';\nimport Chat from './components/Chat/chatHome';\nimport { useCycle } from 'framer-motion';\n//import { PulseLoader } from 'halogen';\nimport Spinner from './microComponents/spinner';\nimport Archive from \"./components/Archive\"\n// import Conflicts from \"./components/Conflicts\"\n//use via props vs via a freq called func becasue it will give better performance!\nexport const userData = createContext();\nconst App = () => {\n   //create a function here that will create the props data. if it cannot find the data for the prop, redirect and/or return null.\n   const [state, setState] = useState({\n      username: null,\n      data: null,\n      events: null,\n      friendEvents: null,\n      /*--------------------*/\n      friendReqs: null,\n      friends: null,\n      /*--------------------*/\n      month: null,\n      year: null,\n      /* ------------------ */\n      chats: null,\n      messages: null,\n   });\n   //get to removeing the constructors!!!\n   useEffect(() => {\n      getData();\n      setInterval(() => {\n         console.log('refreshing...');\n         getData();\n      }, 15000);\n      //localize???\n   }, []);\n   \n   //put events into state\n   //console.log(state, 'state from appjs');\n\n   return (\n      <userData.Provider value={state}>\n         {state.username == null && window.location.pathname != '/' ? (\n            <Spinner />\n         ) : (\n            <Router>\n               <Navbar />\n               <Switch>\n                  <Route path=\"/\" exact component={Login} />\n                  <Route path=\"/home\" exact component={Home} />\n                  <Route\n                     exact\n                     path=\"/home/:day/:month/:year\"\n                     component={Createevent}\n                  />\n                  <Route exact path=\"/friends\" component={Friends} />\n                  <Route exact path=\"/chat\" component={Chat} />\n                     <Route exact path=\"/edit/:id\" component={Edit} />\n                     <Route exact path=\"/archive\" component={Archive}/>\n                  {/* <Route exact path=\"/conflicts\" component={Conflicts} /> */}\n                  <Route render={() => <h1>404 error</h1>} />\n               </Switch>\n               {/* <BetaFooter /> */}\n            </Router>\n         )}\n      </userData.Provider>\n   );\n   function getData() {\n      const cookie = localStorage.getItem('token');\n      if (cookie) {\n         if (window.location.pathname === '/') {\n            window.location.pathname = '/home';\n         }\n         axios\n            .get('http://localhost:8000/getuser', {\n               headers: { Authorization: `Bearer ${cookie}` },\n            })\n            .then((res) => {\n               console.log(res.data, 'res');\n               // setTimeout(()=>\n                     setState({\n                        username: res.data.user.username,\n                        data: res.data.user,\n                        events: res.data.events.sort((a, b) => sortByDate(a, b)).sort(sortNew),//.filter(d => new Date() < new Date(d.date)),\n                        id: res.data.user.id,\n                        /*--------------------*/\n                        incoming: res.data.incoming,\n                        outgoing: res.data.outgoing,\n                        friends: res.data.friends,\n                        /*--------------------*/\n                        refresh: () => getData(),\n                        /*--------------------*/\n                        conflicts:res.data.conflicts\n                     })//,\n            //       3000\n            //   );\n            })\n            .catch((err) => {\n               //if the cookie is bad, then login\n               console.log('in catch block, fatal req error', err);\n               localStorage.removeItem('token');\n               window.location.pathname = '/';\n            });\n         //this should ONLY be triggered when the cookie is null and the pathname is not login, so a user is not found.\n      } else if (window.location.pathname != '/') {\n         //if there is no cookie, the redirect will go through, but the component will handle the rejection.\n         //console.log('error!');\n         // <Redirect to=\"/\"/>\n         window.location.pathname = '/';\n      }\n   }\n};\nexport default App;\nfunction sortByDate(a,b) {\n   if (new Date(a.date) > new Date(b.date)) {\n      return -1\n   } else {\n      return 1\n   }\n}\nfunction sortNew(a, b) {\n   if(new Date(a.date).getDate() == new Date(b.date).getDate() &&\n      new Date(a.date).getMonth() == new Date(b.date).getMonth() &&\n      new Date(a.date).getFullYear() == new Date(b.date).getFullYear()) {\n      return 1\n   } else {\n      return -1\n   }\n}"]},"metadata":{},"sourceType":"module"}