{"ast":null,"code":"import e from \"fast-deep-equal\";\nimport { useMemo as r } from \"react\";\n\nfunction n(r, n, o, s = 0, i = !1) {\n  for (const r of n) if (e(o, r.args)) {\n    if (i) return;\n    if (r.error) throw r.error;\n    if (r.response) return r.response;\n    throw r.promise;\n  }\n\n  const t = {\n    args: o,\n    promise: r(...o).then(e => t.response = null == e || e).catch(e => t.error = e).then(() => {\n      s > 0 && setTimeout(() => {\n        const e = n.indexOf(t);\n        -1 !== e && n.splice(e, 1);\n      }, s);\n    })\n  };\n  if (n.push(t), !i) throw t.promise;\n}\n\nfunction o(r, ...n) {\n  if (void 0 === n) r.splice(0, r.length);else {\n    const o = r.find(r => e(n, r.args));\n\n    if (o) {\n      const e = r.indexOf(o);\n      -1 !== e && r.splice(e, 1);\n    }\n  }\n}\n\nfunction s(r, s = 0) {\n  const i = [];\n  return {\n    read: (...e) => n(r, i, e, s),\n    preload: (...e) => {\n      n(r, i, e, s, !0);\n    },\n    clear: (...e) => o(i, ...e),\n    peek: (...r) => {\n      var n;\n      return null == (n = i.find(n => e(r, n.args))) ? void 0 : n.response;\n    }\n  };\n}\n\nlet i = [];\n\nfunction t(e, o) {\n  return r(() => e && n(e, i, o, t.lifespan), o);\n}\n\nt.lifespan = 0, t.clear = (...e) => o(i, ...e), t.preload = (e, ...r) => {\n  n(e, i, r, t.lifespan, !0);\n}, t.peek = (...r) => {\n  var n;\n  return null == (n = i.find(n => e(r, n.args))) ? void 0 : n.response;\n};\nexport { s as createAsset, t as useAsset };","map":{"version":3,"sources":["/Users/jackbocresion/node_modules/use-asset/dist/index.js"],"names":["e","useMemo","r","n","o","s","i","args","error","response","promise","t","then","catch","setTimeout","indexOf","splice","push","length","find","read","preload","clear","peek","lifespan","createAsset","useAsset"],"mappings":"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","sourcesContent":["import e from\"fast-deep-equal\";import{useMemo as r}from\"react\";function n(r,n,o,s=0,i=!1){for(const r of n)if(e(o,r.args)){if(i)return;if(r.error)throw r.error;if(r.response)return r.response;throw r.promise}const t={args:o,promise:r(...o).then(e=>t.response=null==e||e).catch(e=>t.error=e).then(()=>{s>0&&setTimeout(()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)},s)})};if(n.push(t),!i)throw t.promise}function o(r,...n){if(void 0===n)r.splice(0,r.length);else{const o=r.find(r=>e(n,r.args));if(o){const e=r.indexOf(o);-1!==e&&r.splice(e,1)}}}function s(r,s=0){const i=[];return{read:(...e)=>n(r,i,e,s),preload:(...e)=>{n(r,i,e,s,!0)},clear:(...e)=>o(i,...e),peek:(...r)=>{var n;return null==(n=i.find(n=>e(r,n.args)))?void 0:n.response}}}let i=[];function t(e,o){return r(()=>e&&n(e,i,o,t.lifespan),o)}t.lifespan=0,t.clear=(...e)=>o(i,...e),t.preload=(e,...r)=>{n(e,i,r,t.lifespan,!0)},t.peek=(...r)=>{var n;return null==(n=i.find(n=>e(r,n.args)))?void 0:n.response};export{s as createAsset,t as useAsset};\n"]},"metadata":{},"sourceType":"module"}