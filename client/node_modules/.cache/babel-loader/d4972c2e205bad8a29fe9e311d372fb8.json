{"ast":null,"code":"var _jsxFileName = \"/Users/jackbocresion/Desktop/YoCal copy/client/app-client/src/components/Edit.jsx\";\nimport React, { useContext, useRef, useState } from 'react';\nimport { userData } from '../App';\nimport { motion, useMotionTemplate } from 'framer-motion';\nimport { Link, useParams, useLocation } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport Event from '../components/animatedEvent';\nimport Progress from '../microComponents/progress';\nimport '../styles/forms.scss';\nimport { useHistory } from 'react-router-dom';\nimport { createCalendar, highlightDate } from './functions/calendars';\nimport \"../styles/edit.scss\";\nimport \"../styles/calendar.scss\";\n\nDate.prototype.getInfo = function () {\n  return {\n    day: this.getDate(),\n    month: this.getMonth(),\n    year: this.getFullYear(),\n    hour: this.getHours() > 12 ? this.getHours() % 12 : this.getHours() == 0 ? 12 : this.getHours(),\n    minute: this.getMinutes(),\n    tod: this.getHours() > 12 ? 2 : 1,\n    obj: this\n  };\n}; //add date changing!!\n\n\nexport default function Edit(props) {\n  const history = useHistory();\n  const [user, setUser] = useContext(userData);\n  const {\n    id\n  } = useParams();\n  const [event, setEvent] = useState(user.events.get(id));\n  useEffect(() => {\n    setEvent(user.events.get(id));\n  }, []);\n  const [error, setError] = useState('');\n\n  function updateTitle(e) {\n    if (e.target.value.length > 60) return setError('your event title must be between 4 and 60 characters');\n    setEvent({ ...event,\n      title: e.target.value,\n      date: event.date,\n      duration: event.duration\n    });\n  }\n\n  useEffect(() => {\n    console.log(event);\n  }, [event]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"p-5 edit-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"selectors-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    id: \"hour\",\n    className: \"form-select form-select-sm\",\n    style: {\n      width: '100px',\n      borderRadius: 10\n    },\n    name: \"hour\",\n    value: new Date(event.date).getHours().toString(),\n    onChange: e => setEvent({ ...event,\n      title: event.title,\n      date: new Date(event.date).setHours(e.target.value),\n      duration: event.duration\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 16\n    }\n  }, [...Array(12).keys()].map(item => /*#__PURE__*/React.createElement(\"option\", {\n    value: item,\n    key: item++,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 22\n    }\n  }, item))), \"\\xA0\", /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-select form-select-sm\",\n    style: {\n      width: '100px',\n      borderRadius: 10\n    },\n    onChange: e => setEvent({ ...event,\n      title: event.title,\n      date: new Date(event.date).setMinutes(e.target.value),\n      duration: event.duration\n    }),\n    value: new Date(event.date).getMinutes().toString(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 16\n    }\n  }, [...Array(2).keys()].map(item => /*#__PURE__*/React.createElement(\"option\", {\n    key: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 22\n    }\n  }, '0' + 5 * item)), [...Array(10).keys()].map(item => /*#__PURE__*/React.createElement(\"option\", {\n    key: item++,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 22\n    }\n  }, 5 * (item + 1)))), \"\\xA0\", /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: '100px',\n      borderRadius: 10\n    },\n    className: \"form-select form-select-sm\",\n    id: \"tod\",\n    name: \"tod\",\n    value: new Date(event.date).getInfo().tod == 1 ? 'AM' : 'PM',\n    onChange: e => setEvent({ ...event,\n      title: event.title,\n      date: new Date(event.date).setHours((new Date(event.date).getHours() + 12) % 24),\n      duration: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, \"AM\"), /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 19\n    }\n  }, \"PM\")), \"\\xA0\", /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: '4px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 16\n    }\n  }, \"\\xA0for\\xA0\"), \"\\xA0\", /*#__PURE__*/React.createElement(\"select\", {\n    style: {\n      width: '130px',\n      borderRadius: 10\n    },\n    className: \"form-select form-select-sm\",\n    onChange: e => setEvent({ ...event,\n      title: event.title,\n      date: event.date,\n      duration: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 16\n    }\n  }, [...Array(4).keys()].map(i => 15 * i < 10 ? /*#__PURE__*/React.createElement(\"option\", {\n    value: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"No duration\") :\n  /*#__PURE__*/\n  //set VCALUES TO THE MINUTE UNIT!!!\n  React.createElement(\"option\", {\n    value: 15 * i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 28\n    }\n  }, 15 * i, \" Minutes\")), /*#__PURE__*/React.createElement(\"option\", {\n    selected: true,\n    value: 60,\n    selected: event.duration == 60 ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 19\n    }\n  }, \"1 Hour\"), [...Array(5).keys()].map(i => /*#__PURE__*/React.createElement(\"option\", {\n    value: 60 * (2 + i),\n    selected: event.duration == 60 * (2 + i) ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 22\n    }\n  }, 2 + i, \" Hours\") //UPLOAD TO DB AS A DATE\n  ), /*#__PURE__*/React.createElement(\"option\", {\n    value: 9 * 60,\n    selected: event.duration == 9 * 60 ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, \"9 Hours\"))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control create-event\",\n    value: event && event.title,\n    onChange: e => updateTitle(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(Progress, {\n    done: event.title.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(motion.button, {\n    whileHover: {\n      scale: 1.2\n    },\n    whileTap: {\n      scale: 0.9\n    },\n    className: \"btn btn-primary\",\n    onClick: () => update(event).then(() => {\n      console.log('sucess!');\n      user.refresh();\n      history.push('/home');\n    }).catch(() => {}),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 16\n    }\n  }, \"Confirm edits\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(motion.button, {\n    whileHover: {\n      scale: 1.2\n    },\n    whileTap: {\n      scale: 0.9\n    },\n    className: \"btn btn-sm btn-danger mt-2\",\n    onClick: () => setEvent(user.events && user.events[id]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 16\n    }\n  }, \"Revert changes\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(motion.button, {\n    whileHover: {\n      scale: 1.2\n    },\n    whileTap: {\n      scale: 0.9\n    },\n    className: \"btn btn-sm btn-secondary\",\n    onClick: () => history.goBack(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 16\n    }\n  }, \"\\u276E home\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"edit-cal days\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, createCalendar(5, 2020).map(item => /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 19\n    }\n  }, item == -1 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"wrong\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, item == -1 ? '-' : item + 1) : /*#__PURE__*/React.createElement(Link, {\n    to: `/home/${1 + item}/${5}/${2020}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: highlightDate(item, {\n      month: 5,\n      year: 2020\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 31\n    }\n  }, item + 1)))))));\n\n  async function update(Newevent) {\n    const cookie = localStorage.getItem('token');\n    const data = {\n      duration: Newevent.duration,\n      title: Newevent.title,\n      date: new Date(Newevent.date).toISOString(),\n      eventid: Newevent.eventid\n    };\n\n    try {\n      await axios.post(`http://localhost:8000/editevent`, data, {\n        headers: {\n          Authorization: `Bearer ${cookie}`\n        }\n      });\n      user.events.set(Newevent.eventid, { ...data,\n        creator: Newevent.creator\n      });\n      setUser;\n    } catch (e) {\n      console.log(\"error: \" + e);\n    }\n  }\n}","map":{"version":3,"sources":["/Users/jackbocresion/Desktop/YoCal copy/client/app-client/src/components/Edit.jsx"],"names":["React","useContext","useRef","useState","userData","motion","useMotionTemplate","Link","useParams","useLocation","useEffect","axios","Event","Progress","useHistory","createCalendar","highlightDate","Date","prototype","getInfo","day","getDate","month","getMonth","year","getFullYear","hour","getHours","minute","getMinutes","tod","obj","Edit","props","history","user","setUser","id","event","setEvent","events","get","error","setError","updateTitle","e","target","value","length","title","date","duration","console","log","width","borderRadius","toString","setHours","Array","keys","map","item","setMinutes","marginTop","i","scale","update","then","refresh","push","catch","goBack","Newevent","cookie","localStorage","getItem","data","toISOString","eventid","post","headers","Authorization","set","creator"],"mappings":"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","sourcesContent":["import React, { useContext, useRef, useState } from 'react';\nimport { userData } from '../App';\nimport { motion, useMotionTemplate } from 'framer-motion';\nimport { Link, useParams, useLocation } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport Event from '../components/animatedEvent';\nimport Progress from '../microComponents/progress';\nimport '../styles/forms.scss';\nimport { useHistory } from 'react-router-dom';\nimport { createCalendar, highlightDate } from './functions/calendars'\nimport \"../styles/edit.scss\";\nimport \"../styles/calendar.scss\"\n\nDate.prototype.getInfo = function () {\n   return {\n      day: this.getDate(),\n      month: this.getMonth(),\n      year: this.getFullYear(),\n      hour:\n         this.getHours() > 12\n            ? this.getHours() % 12\n            : this.getHours() == 0\n            ? 12\n            : this.getHours(),\n      minute: this.getMinutes(),\n      tod: this.getHours() > 12 ? 2 : 1,\n      obj: this,\n   };\n};\n//add date changing!!\nexport default function Edit(props) {\n   const history = useHistory();\n   const [user, setUser] = useContext(userData);\n\n   const { id } = useParams();\n\n   const [event, setEvent] = useState(user.events.get(id))\n   useEffect(() => {\n      setEvent(user.events.get(id));\n   }, [])\n   const [error, setError] = useState('');\n   function updateTitle(e) {\n      if (e.target.value.length > 60)\n         return setError(\n            'your event title must be between 4 and 60 characters'\n         );\n      setEvent({\n         ...event,\n\n         title: e.target.value,\n         date: event.date,\n         duration: event.duration,\n      });\n   }\n   useEffect(() => {\n      console.log(event);\n   }, [event]);\n\n   return (\n      <div className=\"p-5 edit-flex\">\n         <div>\n            <div className=\"selectors-flex\">\n               <select\n                  id=\"hour\"\n                  className=\"form-select form-select-sm\"\n                  style={{ width: '100px', borderRadius: 10 }}\n                  name=\"hour\"\n                  value={new Date(event.date).getHours().toString()}\n                  onChange={(e) =>\n                     setEvent({\n                        ...event,\n                        title: event.title,\n                        date: new Date(event.date).setHours(e.target.value),\n                        duration: event.duration,\n                     })\n                  }\n               >\n                  {[...Array(12).keys()].map((item) => (\n                     <option value={item} key={item++}>\n                        {item}\n                     </option>\n                  ))}\n               </select>\n               &nbsp;\n               <select\n                  className=\"form-select form-select-sm\"\n                  style={{ width: '100px', borderRadius: 10 }}\n                  onChange={(e) =>\n                     setEvent({\n                        ...event,\n                        title: event.title,\n                        date: new Date(event.date).setMinutes(e.target.value),\n                        duration: event.duration,\n                     })\n                  }\n                  value={new Date(event.date).getMinutes().toString()}\n               >\n                  {[...Array(2).keys()].map((item) => (\n                     <option key={item}>{'0' + 5 * item}</option>\n                  ))}\n                  {[...Array(10).keys()].map((item) => (\n                     <option key={item++}>{5 * (item + 1)}</option>\n                  ))}\n               </select>\n               &nbsp;\n               <select\n                  style={{ width: '100px', borderRadius: 10 }}\n                  className=\"form-select form-select-sm\"\n                  id=\"tod\"\n                  name=\"tod\"\n                  value={new Date(event.date).getInfo().tod == 1 ? 'AM' : 'PM'}\n                  onChange={(e) =>\n                     setEvent({\n                        ...event,\n                        title: event.title,\n                        date: new Date(event.date).setHours(\n                           (new Date(event.date).getHours() + 12) % 24\n                        ),\n                        duration: e.target.value,\n                     })\n                  }\n               >\n                  <option>AM</option>\n                  <option>PM</option>\n               </select>\n               &nbsp;\n               <div style={{ marginTop: '4px' }}>&nbsp;for&nbsp;</div>\n               &nbsp;\n               <select\n                  style={{ width: '130px', borderRadius: 10 }}\n                  className=\"form-select form-select-sm\"\n                  onChange={(e) =>\n                     setEvent({\n                        ...event,\n                        title: event.title,\n                        date: event.date,\n                        duration: e.target.value,\n                     })\n                  }\n               >\n                  {[...Array(4).keys()].map((i) =>\n                     15 * i < 10 ? (\n                        <option value={0}>No duration</option>\n                     ) : (\n                           //set VCALUES TO THE MINUTE UNIT!!!\n                           <option value={15 * i}>{15 * i} Minutes</option>\n                        )\n                  )}\n                  <option\n                     selected\n                     value={60}\n                     selected={event.duration == 60 ? true : false}\n                  >\n                     1 Hour\n                  </option>\n                  {[...Array(5).keys()].map((i) => (\n                     <option\n                        value={60 * (2 + i)}\n                        selected={event.duration == 60 * (2 + i) ? true : false}\n                     >\n                        {2 + i} Hours\n                     </option>\n                     //UPLOAD TO DB AS A DATE\n                  ))}\n                  <option\n                     value={9 * 60}\n                     selected={event.duration == 9 * 60 ? true : false}\n                  >\n                     9 Hours\n                  </option>\n               </select>\n            </div>\n            <br />\n            <div className=\"float-left\">\n               <input\n                  className=\"form-control create-event\"\n                  value={event && event.title}\n                  onChange={(e) => updateTitle(e)}\n               />\n               <Progress done={event.title.length} />\n               <br />\n               <motion.button\n                  whileHover={{\n                     scale: 1.2,\n                  }}\n                  whileTap={{\n                     scale: 0.9,\n                  }}\n                  className=\"btn btn-primary\"\n                  onClick={() =>\n                     update(event)\n                        .then(() => {\n                           console.log('sucess!');\n                           user.refresh();\n                           history.push('/home');\n                        })\n                        .catch(() => { })\n                  }\n               >\n                  Confirm edits\n               </motion.button>\n               <br />\n               <motion.button\n                  whileHover={{\n                     scale: 1.2,\n                  }}\n                  whileTap={{\n                     scale: 0.9,\n                  }}\n                  className=\"btn btn-sm btn-danger mt-2\"\n                  onClick={() => setEvent(user.events && user.events[id])}\n               >\n                  Revert changes\n               </motion.button>\n               <br />\n               <br />\n               {/* <Link to=\"/home\"> */}\n               <motion.button\n                  whileHover={{\n                     scale: 1.2,\n                  }}\n                  whileTap={{\n                     scale: 0.9,\n                  }}\n                  className=\"btn btn-sm btn-secondary\"\n                  onClick={() => history.goBack()}\n               >\n                  &#10094; home\n               </motion.button>\n               {/* </Link> */}\n            </div>\n         </div>\n         <div className=\"float-right\">\n            <ul className=\"edit-cal days\">\n               {createCalendar(5, 2020).map((item) => (\n                  <li>\n                     {item == -1 ? (\n                        <span className=\"wrong\">\n                           {item == -1 ? '-' : item + 1}\n                        </span>\n                     ) : (\n                           <Link to={`/home/${1 + item}/${5}/${2020}`}>\n                              <span\n                                 className={highlightDate(item, {\n                                    month: 5,\n                                    year: 2020,\n                                 })}\n                              >\n                                 {item + 1}\n                              </span>\n                           </Link>\n                        )}\n                  </li>\n               ))}\n            </ul>\n         </div>\n         {/* <h2>{event && event.date}</h2>\n         {new Date(event.date).toString()} */}\n      </div>\n   );\n\n   async function update(Newevent) {\n      const cookie = localStorage.getItem('token');\n      const data = {\n         duration: Newevent.duration,\n         title: Newevent.title,\n         date: new Date(Newevent.date).toISOString(),\n         eventid: Newevent.eventid,\n      };\n      try {\n         await axios.post(\n            `http://localhost:8000/editevent`,\n            data,\n            {\n               headers: { Authorization: `Bearer ${cookie}` },\n            }\n         );\n         user.events.set(Newevent.eventid, {\n            ...data, creator: Newevent.creator\n         })\n         setUser\n      } catch (e) {\n         console.log(\"error: \" + e)\n      }\n   }\n}\n"]},"metadata":{},"sourceType":"module"}